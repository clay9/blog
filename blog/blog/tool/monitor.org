#+TITLE: monitor
#+DATE: 2021-10-28 23:03:18
#+HUGO_CATEGORIES: tool
#+HUGO_TAGS: influxdb cadvisor grafana
#+HUGO_DRAFT: false
#+hugo_auto_set_lastmod: t
#+OPTIONS: ^:nil

cadvisor, influxdb, grafana 组成的监控系统

#+hugo: more

cadvisor 负责docker容器数据的收集
: 默认只显示2分钟的数据, 而且还没有保存, 因此需要数据库保存数据

influxdb 负责数据的保存

grafana  负责数据的展示, 其图表做的非常好


* influxdb2.0
  记录
  1. 创建流程
     1) 创建的时候需要先创建超级用户与组织org
	: 这里的超级用户有web的权限, 貌似是web管理员
     2) 再创建bucket
	: bucket = db + rp + ...
     3) 再创建数据库<db,rp>, 需要关联到bucket与org
     4) 再创建数据库用户 关联到bucket与org
	: 这里的用户只是数据库的, 没有web的权限
  
** 常用命令
   查看用户
   influx user list     -- 这里看到的是上面的超级用户, 有web权限的
   influx v1 auth list  -- 这里是查看数据库的, v1是1.0的接口

   查看数据库
   influx v1 dbrp list  -- 可以看到db及其相关联的bucket等map信息
