<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="使用hugo + github搭建blog "><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://clay9.github.io/blog/docs/tool/hugo/"><meta property="og:site_name" content="飘"><meta property="og:title" content="hugo"><meta property="og:description" content="使用hugo + github搭建blog"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2024-01-30T10:24:00+00:00"><meta property="article:modified_time" content="2025-05-29T09:46:18+00:00"><title>hugo | 飘</title><link rel=icon href=/blog/favicon.png><link rel=manifest href=/blog/manifest.json><link rel=canonical href=https://clay9.github.io/blog/docs/tool/hugo/><link rel=stylesheet href=/blog/book.min.26ab4dc3f6076ceda2f9c263aa4029ae3341dbcce339f901aa432b11da6e5894.css integrity="sha256-JqtNw/YHbO2i+cJjqkAprjNB28zjOfkBqkMrEdpuWJQ=" crossorigin=anonymous><script defer src=/blog/fuse.min.js></script><script defer src=/blog/en.search.min.ee95b2204247c036f9117f17cb10db8f6fead93e50d5e1a02fc4d2e4264412ed.js integrity="sha256-7pWyIEJHwDb5EX8XyxDbj2/q2T5Q1eGgL8TS5CZEEu0=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/blog/><span>飘</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><input type=checkbox id=section-991bd30d46a386cace03b4f84b11c8f5 class=toggle>
<label for=section-991bd30d46a386cace03b4f84b11c8f5 class="flex justify-between"><a role=button>os</a></label><ul><li><a href=/blog/docs/os/linux/>linux</a></li><li><a href=/blog/docs/os/mac/>mac</a></li><li><input type=checkbox id=section-f866724d2acb7e76aaac59a04f639ef7 class=toggle>
<label for=section-f866724d2acb7e76aaac59a04f639ef7 class="flex justify-between"><a role=button>os</a></label><ul><li><a href=/blog/docs/os/os/os/>os</a></li><li><a href=/blog/docs/os/os/memory_01/>memory 01</a></li></ul></li><li><a href=/blog/docs/os/dll/>静态库 && 动态库</a></li><li><input type=checkbox id=section-ab3af5bd51cb4c263c32a78225fa580c class=toggle>
<label for=section-ab3af5bd51cb4c263c32a78225fa580c class="flex justify-between"><a role=button>socket</a></label><ul><li><a href=/blog/docs/os/socket/socket/>socket base</a></li><li><a href=/blog/docs/os/socket/asio/>asio</a></li></ul></li></ul></li><li><input type=checkbox id=section-3fa40444857bc94b52ee0d09f552885c class=toggle>
<label for=section-3fa40444857bc94b52ee0d09f552885c class="flex justify-between"><a role=button>emacs</a></label><ul><li><a href=/blog/docs/emacs/emacs/>emacs</a></li><li><input type=checkbox id=section-bc70934d4e2c8d9a7868939ae442d96c class=toggle>
<label for=section-bc70934d4e2c8d9a7868939ae442d96c class="flex justify-between"><a role=button>org && gtd</a></label><ul><li><a href=/blog/docs/emacs/org/org/>org</a></li><li><a href=/blog/docs/emacs/org/gtd/>gtd</a></li><li><a href=/blog/docs/emacs/org/org_gtd/>org && gtd</a></li><li><a href=/blog/docs/emacs/org/org_export/>org exprot && ox-hugo</a></li></ul></li><li><input type=checkbox id=section-d284c356736fd9574da0dde99d385b68 class=toggle>
<label for=section-d284c356736fd9574da0dde99d385b68 class="flex justify-between"><a role=button>常用扩展</a></label><ul><li><a href=/blog/docs/emacs/lisp/eshell/>eshell</a></li><li><a href=/blog/docs/emacs/lisp/tramp/>tramp</a></li><li><a href=/blog/docs/emacs/lisp/graph/>artist && plantuml</a></li><li><a href=/blog/docs/emacs/lisp/mail/>mail</a></li><li><a href=/blog/docs/emacs/lisp/gdb/>gdb && gud</a></li><li><a href=/blog/docs/emacs/lisp/ai/>AI</a></li></ul></li></ul></li><li><input type=checkbox id=section-acf0594e7a1234c2d7cae5f23b06f240 class=toggle>
<label for=section-acf0594e7a1234c2d7cae5f23b06f240 class="flex justify-between"><a role=button>prog language</a></label><ul><li><input type=checkbox id=section-2468564b5fcc8dbb0ecf9a3acd8aaecd class=toggle>
<label for=section-2468564b5fcc8dbb0ecf9a3acd8aaecd class="flex justify-between"><a role=button>c++</a></label><ul><li><a href=/blog/docs/prog_language/c++/c++/>c++历史</a></li><li><a href=/blog/docs/prog_language/c++/stl/>C && C++ 常见库</a></li></ul></li><li><a href=/blog/docs/prog_language/elisp/>elisp</a></li><li><a href=/blog/docs/prog_language/shell/>shell</a></li></ul></li><li><input type=checkbox id=section-546918d455c17ba2747a13b59a082aee class=toggle>
<label for=section-546918d455c17ba2747a13b59a082aee class="flex justify-between"><a role=button>prog lsp</a></label><ul><li><a href=/blog/docs/prog_lsp/global/>global</a></li></ul></li><li><input type=checkbox id=section-afc89fa4b07162f1d84ad00ac7dc9100 class=toggle>
<label for=section-afc89fa4b07162f1d84ad00ac7dc9100 class="flex justify-between"><a role=button>prog compile</a></label><ul><li><a href=/blog/docs/prog_compile/autotools/>autotools</a></li><li><a href=/blog/docs/prog_compile/make/>make</a></li><li><a href=/blog/docs/prog_compile/cmake/>cmake</a></li><li><a href=/blog/docs/prog_compile/gcc/>gcc</a></li></ul></li><li><input type=checkbox id=section-11c3ec22a7b18dd97ab270ab2478f4f6 class=toggle>
<label for=section-11c3ec22a7b18dd97ab270ab2478f4f6 class="flex justify-between"><a role=button>prog debug</a></label><ul><li><a href=/blog/docs/prog_debug/gdb/>gdb</a></li><li><a href=/blog/docs/prog_debug/valgrind/>valgrind</a></li></ul></li><li><input type=checkbox id=section-e28331ccf58c3495c420d802b774d229 class=toggle>
<label for=section-e28331ccf58c3495c420d802b774d229 class="flex justify-between"><a role=button>prog vc</a></label><ul><li><a href=/blog/docs/prog_vc/git/>git</a></li></ul></li><li><input type=checkbox id=section-5a14b397bf7b143e435d509e6ce0a2f4 class=toggle>
<label for=section-5a14b397bf7b143e435d509e6ce0a2f4 class="flex justify-between"><a role=button>prog base</a></label><ul><li><a href=/blog/docs/prog_base/algorithm/>数据结构与算法分析</a></li></ul></li><li><input type=checkbox id=section-a21c7c1e5253f7258b54a084bca47bcd class=toggle checked>
<label for=section-a21c7c1e5253f7258b54a084bca47bcd class="flex justify-between"><a role=button>tools</a></label><ul><li><a href=/blog/docs/tool/docker/>docker</a></li><li><a href=/blog/docs/tool/k8s/>k8s</a></li><li><a href=/blog/docs/tool/monitor/>cadvisor, prometheus, grafana</a></li><li><a href=/blog/docs/tool/hugo/ class=active>hugo</a></li><li><a href=/blog/docs/tool/redis/>redis</a></li><li><a href=/blog/docs/tool/sql/>数据库</a></li><li><a href=/blog/docs/tool/protocol/>乱七八糟的协议合集</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/blog/svg/menu.svg class=book-icon alt=Menu></label><h3>hugo</h3><label for=toc-control><img src=/blog/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#hugo是什么>hugo是什么</a></li><li><a href=#hugo使用>hugo使用</a><ul><li><a href=#安装>安装</a></li><li><a href=#配置>配置</a></li><li><a href=#使用>使用</a></li></ul></li><li><a href=#hugo高级用法>hugo高级用法</a><ul><li><a href=#section-and-and-bundle-and-and-menu>section && bundle && menu</a></li><li><a href=#module>module</a></li><li><a href=#highlight>highlight</a></li><li><a href=#shortcode>shortcode</a></li><li><a href=#自定义域名>自定义域名</a></li><li><a href=#blank-line>blank-line</a></li></ul></li><li><a href=#hugo-book-theme>hugo book theme</a><ul><li><a href=#基本概念>基本概念</a></li><li><a href=#参考文档>参考文档</a></li></ul></li><li><a href=#q-and-a>Q & A</a></li></ul></nav></aside></header><article class="markdown book-article"><p>使用hugo + github搭建blog<br></p><h2 id=前言>前言
<a class=anchor href=#%e5%89%8d%e8%a8%80>#</a></h2><p>记录blog好处很多, 却也增加了使用者的难度, 比如要理解html,css等. 同时,外在的表现往往会导致重心偏移, 过多追求外在的东西, 忽略了记录blog的初衷.<br></p><p>因此, 需要一个能让我们专注于文章知识本身, 而无需去关心其他的工具, 来帮助我们搭建blog.<br></p><p>当下, 一个不错的选择是hugo. hugo不拘束文章语言(markdown, org等), 自动将语言转化为html, 并且提供不错的主题外观, 使我们可以专注文章本身.<br></p><h2 id=hugo是什么>hugo是什么
<a class=anchor href=#hugo%e6%98%af%e4%bb%80%e4%b9%88>#</a></h2><p>如上所言, hugo是一款不错的blog框架<br></p><p>主要优点:<br></p><ul><li>不限制前端语言<br></li><li>自动化生成html<br></li><li>丰富便捷的themes<br></li><li>与github action无缝结合, 无须在本地搭建hugo运行环境<br></li><li>迅速上手, 学习时间短<br></li><li>对org-mode的支持可以忍受<br></li></ul><h2 id=hugo使用>hugo使用
<a class=anchor href=#hugo%e4%bd%bf%e7%94%a8>#</a></h2><h3 id=安装>安装
<a class=anchor href=#%e5%ae%89%e8%a3%85>#</a></h3><p>不建议在本地搭建hugo环境. 如果blog托管在github, 强烈推荐使用github action来部署.<br></p><h3 id=配置>配置
<a class=anchor href=#%e9%85%8d%e7%bd%ae>#</a></h3><p>hugo配置非常简单, 可以参考<a href=https://github.com/clay9/clay9.github.io/blob/master/config.toml>hugo.toml</a><br>github action的配置, 可以参考<a href=https://github.com/clay9/clay9.github.io/blob/master/.github/workflows/gh-pages.yml>yml</a><br></p><h3 id=使用>使用
<a class=anchor href=#%e4%bd%bf%e7%94%a8>#</a></h3><p>hugo官方guthub action是把content目录下的md文件, 转换为静态的html文件.<br>所以我们只要把自己的blog文件在官方之前, 转换为md文件放到content目录下面即可. 同样的, 我们也可以把自己生成的html文件直接放到content目录<br></p><p>虽然github action做了很多动作, 但我们需要做的只是维护自己的blog文件, 并git push即可. blog的更新流程由github action完成, 我们无须关心.<br></p><h2 id=hugo高级用法>hugo高级用法
<a class=anchor href=#hugo%e9%ab%98%e7%ba%a7%e7%94%a8%e6%b3%95>#</a></h2><h3 id=section-and-and-bundle-and-and-menu>section && bundle && menu
<a class=anchor href=#section-and-and-bundle-and-and-menu>#</a></h3><table><thead><tr><th>key</th><th>desc</th></tr></thead><tbody><tr><td>menu</td><td>top navigation (所有文章|分类|标签|关于)</td></tr><tr><td>section</td><td>post|docs|menu等</td></tr><tr><td>bundle</td><td>文件资源的管理方式</td></tr></tbody></table><p>bundle 只能是index.md 或者_index.md. 其他后缀名无效<br>TODO 增加bundle的详细解释<br></p><h3 id=module>module
<a class=anchor href=#module>#</a></h3><p>hugo module可以代替主题<br>使用步骤:<br></p><ol><li>把自身仓库变为hugo module<br>实际就是增加了一个go.mod文件<br></li><li>在config.toml中增加module import<br>代替了theme, 所以这里的theme要删除, 否则hugo执行的时候会提示找不到theme<br></li><li>调用hugo时, hugo会主动下载module, 并且把它认定为theme文件<br></li></ol><p>vs gitsubmodule 优势<br></p><ol><li>gitsubmodule还需要管理使用的theme的信息, module完全不需要管理<br>gitsubmodule 可以使用 update &ndash;remote来指定使用远程仓库信息, 但是繁琐, 不如go.mod方便<br></li></ol><h3 id=highlight>highlight
<a class=anchor href=#highlight>#</a></h3><p>代码高亮风格: <a href=https://xyproto.github.io/splash/docs/index.html>hightlight style</a><br></p><h3 id=shortcode>shortcode
<a class=anchor href=#shortcode>#</a></h3><p>TODO 待补充<br>简单理解, 每个hugo theme可以定义自己的shortcode<br>这样可以充分扩展 markdown的语法<br></p><h3 id=自定义域名>自定义域名
<a class=anchor href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%9f%9f%e5%90%8d>#</a></h3><p>实现子域名www.wcq.life 与 顶域名 wcq.life均可访问<br></p><h4 id=hugo配置>hugo配置
<a class=anchor href=#hugo%e9%85%8d%e7%bd%ae>#</a></h4><p>修改配置文件<br></p><pre><code class=language-text>baseURL = &quot;https://www.wcq.life&quot;
</code></pre><h4 id=github配置>github配置
<a class=anchor href=#github%e9%85%8d%e7%bd%ae>#</a></h4><p>在blog/static目录下新增CNAME文件, 其内容为域名, 比如 <a href=https://www.wcq.life>www.wcq.life</a><br></p><p>static目录下的内容, 会由hugo action自动放到网站根结点. 这符合github的要求<br></p><h4 id=域名服务商配置>域名服务商配置
<a class=anchor href=#%e5%9f%9f%e5%90%8d%e6%9c%8d%e5%8a%a1%e5%95%86%e9%85%8d%e7%bd%ae>#</a></h4><ol><li><a href=https://help.github.com/articles/using-a-custom-domain-with-github-pages/>wcq.life绑定教程</a><br>建议创建 wcq.life指向 github的A记录<br></li><li><a href=https://help.github.com/articles/using-a-custom-domain-with-github-pages/>www.wcq.life绑定教程</a><br>创建www.wcq.life指向clay9.github.io的CNAME即可<br></li></ol><p><figure><img src=/blog/docs/tool/hugo/record.png></figure><br></p><h3 id=blank-line>blank-line
<a class=anchor href=#blank-line>#</a></h3><p>hugo 默认使用goldmark作为md的解析器<br>设置markup.goldmark.renderer.hardWraps为true, goldmark 会把 \n => &lt;br /><br>如果在emacs中设置(setq org-export-preserve-breaks t), ox-hugo也会把 \n => &lt;br /><br>所以两者只需要设置一个, 这里建议设置emacs中的<br></p><h2 id=hugo-book-theme>hugo book theme
<a class=anchor href=#hugo-book-theme>#</a></h2><h3 id=基本概念>基本概念
<a class=anchor href=#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5>#</a></h3><p>hugo-book-theme 的file-tree-menu (这里的file-tree-menu 不是上面的menu)<br></p><pre><code class=language-artist>server
\_ _index
\_ view
   \_ _index
   \_ page_3
   \_ page_4
\_ page_1
\_ page_2
</code></pre><p>server/_index 是server的信息显示<br>server/view/_index是server/view的信息显示 (也可以没有)<br>page_1, page_2的weight只影响自身节点(server节点)下的排序, 不会影响server/view节点<br></p><p>hugo_book 简介的显示, 需要放到content/_index.md中<br></p><h3 id=参考文档>参考文档
<a class=anchor href=#%e5%8f%82%e8%80%83%e6%96%87%e6%a1%a3>#</a></h3><p>可以参考官方的例子去做<br><a href=https://hugo-book-demo.netlify.app/>官方deamon对应的web展示</a><br><a href=https://github.com/alex-shpak/hugo-book>官方github网址</a><br></p><h2 id=q-and-a>Q & A
<a class=anchor href=#q-and-a>#</a></h2><ol><li><p>buildFuture: hugo无法正常发布DATE等于今天的blog<br>date导致的发布时间问题. 与github(美国时间)有时差, 导致发布的贴子无法立刻查看.<br></p><p>date的本意是 创作时间.<br>但是publishData为空的时候, 猜测使用了date时间.<br>而date又有时差, 导致帖子无法立刻被查看.<br></p><p>解决方案: 在gh-pages.yml中为hugo增加参数<br>hugo &ndash;minify &ndash;buildFuture<br></p></li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#hugo是什么>hugo是什么</a></li><li><a href=#hugo使用>hugo使用</a><ul><li><a href=#安装>安装</a></li><li><a href=#配置>配置</a></li><li><a href=#使用>使用</a></li></ul></li><li><a href=#hugo高级用法>hugo高级用法</a><ul><li><a href=#section-and-and-bundle-and-and-menu>section && bundle && menu</a></li><li><a href=#module>module</a></li><li><a href=#highlight>highlight</a></li><li><a href=#shortcode>shortcode</a></li><li><a href=#自定义域名>自定义域名</a></li><li><a href=#blank-line>blank-line</a></li></ul></li><li><a href=#hugo-book-theme>hugo book theme</a><ul><li><a href=#基本概念>基本概念</a></li><li><a href=#参考文档>参考文档</a></li></ul></li><li><a href=#q-and-a>Q & A</a></li></ul></nav></div></aside></main></body></html>