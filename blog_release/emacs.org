#+TITLE: emacs
#+INFOJS_OPT: toc:t ltoc:t
#+INFOJS_OPT: view:info mouse:underline buttons:nil
#+INFOJS_OPT: path:/script/org-info.js

* emacs使用心得
** why  -- 为什么使用emacs
   下面只是自己的理由
   1. 项目管理 && 日常工作计划               -- org-mode处理(主要使用了org-agent特性)
   2. blog写作                               -- org-mode处理(org本身是非常优秀的文本模式)
   3. bash(shell) 环境                       -- eshell非常优秀
   4. coding 类c语言(c, c++)                 -- 使用emacs作为IDE
   5. coding 其他语言 (go,lisp, ...)         -- 虽然不如专业的开发软件，但emacs胜在方便快捷   
   
** what -- emacs是什么
   emacs更像是一个可扩展的框架, 需要什么功能，扩展一下即可(添加package)
   
** how  -- 如何使用
   这里只是复述自己如何打造自己的emacs
   
   1. 定制外在样式
      - frame的定制, init-frame
      - font的定制,  init-font
      - 字符编码,    init-encode
      - 主题定制,    dracula-theme
   2. package管理
      init-site-lisp && init-elpa
   3. 内在优化
      - buffer, file显示优化, init-helm-mode
      - 智能匹配（[], {}, '', ""...),  init-smartparens-mode
      - 模板文件,     init-yasnippet-mode
      - 文本区域选择, init-expand-region
      - windos选择,   init-window-number
   4. 常用功能
      - 书签     init-bookmark
      - eshell   init-eshell
      - search   init-search
      - tramp    init-tramp
   5. 常用mode
      - org
      - c-comon IDE	
   6. 快捷键管理
      - 鼠标管理, init-disable-mouse
      - 快捷键,   init-local-shortkey, init-global-shortkey
	
	
* emacs基础操作
** frame基础
   建议frame只显示window, mode-line
   - window是我们操作(write, read)的区域
     重要的是window的创建，切换 和 删除
   - mode-line 补充显示buffer的其他信息,以及mode信息，也非常重要
     
** Helm
   [[file:emacs_com/emacs_helm-mode.org][Helm]]改善了用户"查找"时候的体验;
   helm与传统方式 对比:
   - Helm的过滤方式为 正则表达式
   - 传统的过滤方式为 首字母扩展
** org mode
   [[file:emacs_com/emacs_org-mode.org][org-mode]]一直被称为神器, 据传很多人为了它转到了emacs.
   主要功能:
   - org自身强大的文本模式
   - org-agent
  
** eshell
   [[file:emacs_com/emacs_eshell.org][eshell]]是emacs下非常好用shell;
   主要优点:
   - 与elisp的无缝结合
   - 语法特性方面比bash shell更有意思
     #+BEGIN_EXAMPLE
     cd /ssh:clay@192.168.0.97:~
     #+END_EXAMPLE
** 画图
   emacs支持 [[file:emacs_com/emacs_graphviz-mode.org][ASCII图形 和 dot图形等]]
** 快捷键
   [[file:emacs_com/emacs_shortkey.org][emacs按键]]与vim按键 个人理解:
   - emacs功能强大, 却对手指不友好,  更适合在编辑的时候使用
   - vim 功能缺少, 对手指友好, 更适合在查看文档的时候使用
** elisp
   [[file:emacs_com/emacs_elisp.org][elisp]] 是emacs下的lisp

* emacs打造IDE
** 说明
   本文很大程度借鉴[[http://tuhdo.github.io/c-ide.html][参考文档(强烈建议阅读)]]
** 合格的IDE功能
   - 编辑
     所想即所得的编辑模式
   - 编译
   - 调试
   - 发布

** 编辑器

   | 功能     | mode                         | 说明                                 | 备注   |
   |----------+------------------------------+--------------------------------------+--------|
   | 格式规范 | [[file:emacs_IDE/emacs_cc-mode.org][cc-mode]]                      |                                      |        |
   |----------+------------------------------+--------------------------------------+--------|
   | 自动补全 | [[file:emacs_IDE/emacs_company-mode.org][company-mode]](front-ends)     | 需要back-ends                        |        |
   |          | company-c-headers(back-ends) | 针对头文件,直接安装即可使用,无需配置 |        |
   |----------+------------------------------+--------------------------------------+--------|
   | 智能括号 | [[file:emacs_IDE/emacs_smartparens-mode.org][smartparens-mode]]             |                                      |        |
   |----------+------------------------------+--------------------------------------+--------|
   | 代码折叠 | [[file:emacs_IDE/emacs_hs-mode.org][hs-minor-mode]]                |                                      |        |
   |----------+------------------------------+--------------------------------------+--------|
   | 模板文件 | [[file:emacs_IDE/emacs_yasnippet-mode.org][yasnippet-mode]]               |                                      |        |
   |----------+------------------------------+--------------------------------------+--------|
   | 代码跳转 | [[file:emacs_IDE/emacs_helm-gtags-mode][helm-gtags-mode]](front-ends)  | 需要back-ends                        |        |
   | 查找引用 | global(back-ends)            | apt install global                   |        |
   |----------+------------------------------+--------------------------------------+--------|
   | 拼写检查 | [[file:emacs_IDE/emacs_flyspell-mode.org][flyspell-mode]]                | 单词拼写                             | 已弃用 |
   |----------+------------------------------+--------------------------------------+--------|
   | 语法检查 | flycheck-mode                | 动态,实时检查                        |        |
   |----------+------------------------------+--------------------------------------+--------|
   | 目录列表 | [[file:emacs_IDE/emacs_speedbar-mode.org][speedbar-mode]]                | 显示目录,文件                        |        |
   |----------+------------------------------+--------------------------------------+--------|
   | 语法高亮 | symbol-overlay-mode          |                                      |        |
   |----------+------------------------------+--------------------------------------+--------|

** 编译器
   compilation-mode
   : front-ends, 依赖g++

** 调试器
   gud

* emacs奇淫技巧
** figlet
   把字符艺术化
   emacs中的figlet package是front-end,
   依赖shell环境的back-ends figlet
   
*** 安装
    1. bash中安装back-ends
       #+BEGIN_EXAMPLE
       brew install figlet
       #+END_EXAMPLE
    2. emacs中安装front-ends
       #+BEGIN_EXAMPLE
       package-list-package RET figlet RET
       #+END_EXAMPLE
*** 配置
    1. figlet默认路径
       #+BEGIN_EXAMPLE
       setq figlet-default-directory "/usr/local/bin"
       #+END_EXAMPLE
    2. 默认艺术字体
       #+BEGIN_EXAMPLE
       setq figlet-default-font "banner3-D"
       #+END_EXAMPLE
       
       已安装的字体可以在bash中通过showfigfonts查看   

*** 使用
    #+BEGIN_EXAMPLE
    M-x figlet RET <string> RET
    #+END_EXAMPLE

    #+BEGIN_EXAMPLE
# '########:'##::::'##::::'###:::::'######:::'######::
#  ##.....:: ###::'###:::'## ##:::'##... ##:'##... ##:
#  ##::::::: ####'####::'##:. ##:: ##:::..:: ##:::..::
#  ######::: ## ### ##:'##:::. ##: ##:::::::. ######::
#  ##...:::: ##. #: ##: #########: ##::::::::..... ##:
#  ##::::::: ##:.:: ##: ##.... ##: ##::: ##:'##::: ##:
#  ########: ##:::: ##: ##:::: ##:. ######::. ######::
# ........::..:::::..::..:::::..:::......::::......:::
    #+END_EXAMPLE 
    

    
* emacs键位设置
  原则
  1. 尽量保留默认常用快捷键
  2. 不同mode, 尽量使用相似的快捷键


  思路
  1. 通用快捷键(比如search等与mode无关的) 或者是 所有mode都会使用的(比如yas)
     统一放到C-s中
  2. mode自身的快捷键, 放到C-j中
  3. 因为使用hydra来管理快捷键, 因此可以通过查看hydra body 来查看快捷键设置


  方案
  1. C-s
     查找, 查找全部, 替换, 替换全部
     跳转行号
     查看模板, 添加模板
  2. C-j
     symbol-overlay -- 所有coding都会开启
     helm-gtas      -- cc-mode中开启
     smart-parents  -- 所有coding都会开启
     org-mode


  问题
  1. symbol-overlay, smartparens, helm-gtags会有冲突
     解决方案
     - [X] 开启helm-gtags的时候, hydra-helm-gtags覆盖symbol-overlay
       : 使用remapping commands
     - [ ] smart-parents 使用另外一个快捷键 (这里是妥协的做法, 不是最好的)
     
